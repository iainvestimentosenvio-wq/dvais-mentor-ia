export type AssistantResponse = {
  spokenText?: string
  onScreenTopic?: string
  actions?: Array<Record<string, unknown>>
  requiresUserClick?: boolean
  confidence?: number
  mode?: string
}

export type CacheEntry = {
  response: AssistantResponse
  expiresAt: number
  lastAccessed: number
}

export type CircuitFailure = { timestamps: number[]; blockedUntil?: number }
export type CircuitState = { failures: Map<string, CircuitFailure> }

export const MAX_CACHE_SIZE = 500
export const KB_VERSION = '1.0.0'

export const cache = new Map<string, CacheEntry>()
export const circuit: CircuitState = {
  failures: new Map(),
}
